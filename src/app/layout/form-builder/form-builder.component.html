<div [@routerTransition]>
    <app-page-header [heading]="'Form Builder'" [icon]="'fa-edit'"></app-page-header>

    <form role="form" [formGroup]="formatoForm">
        {{formatoForm.value | json}}
        <div class="row">
            <div class="col-lg-4">
                <fieldset class="form-group required">
                    <label>Categoria</label>
                    <select class="form-control" formControlName="categoriaId" required>
                        <option *ngFor="let categoria of categorias" [value]="categoria.id">{{categoria.nombre}}</option>
                    </select>
                    <p class="help-block">Elija una categoria del menú</p>
                </fieldset>
            </div>
            <div class="col-lg-8">
                <fieldset class="form-group required">
                    <label>Nombre</label>
                    <input class="form-control" type="text" formControlName="nombre" required>
                    <p class="help-block">Escoja un nombre para el formulario. Debe ser único.</p>
                </fieldset>
            </div>
        </div>
        <!-- formularios para los campos -->
        <div formArrayName="_Campos" *ngFor="let campo of formatoForm.get('_Campos').controls; let i = index;">
            <div [formGroupName]="i">

                <fieldset class="form-group required">
                    <label>Nombre</label>
                    <input class="form-control" type="text" formControlName="name" required>
                    <p class="help-block">Escoja un nombre para el formulario. Debe ser único.</p>
                </fieldset>
                <div [ngSwitch]="campo.value.controlType">
                    <div *ngSwitchCase="'checkbox'">
                        <input type="checkbox" formControlName="value">
                        <input type="text" formControlName="label" placeholder="Mensaje">
                        

                    </div>
                    <div *ngSwitchCase="'dropdown'">
                        <div>
                            <!-- crear arrayform para los options -->
                        </div>
                    </div>
                    <div *ngSwitchCase="'textbox'">
                        <div>
                            
                        </div>
                    </div>
                </div>


            </div>
        </div>
        <!-- Agregar campo -->
    </form>
    <fieldset class="form-group required">
        <label>Tipo de campo</label>
        <select class="form-control" [(ngModel)]="tipoNuevoCampo" required>
            <option *ngFor="let tipo of tiposCampo" [value]="tipo.value">{{tipo.text}}</option>
        </select>
        <button type="button" (click)="agregarNuevoCampo(tipoNuevoCampo)" class="btn btn-default">
            <i class="fa fa-plus"></i> Agregar Campo
        </button>
        <p class="help-block">Escoja un nombre para el formulario. Debe ser único.</p>
    </fieldset>
</div>