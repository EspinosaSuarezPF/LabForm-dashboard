<div [@routerTransition]>
    <app-page-header [heading]="'Form Builder'" [icon]="'fa-edit'"></app-page-header>
    <h1>{{message}}</h1>
    <form role="form" [formGroup]="formatoForm">
        {{formatoForm.value | json}}
        <div class="row">
            <div class="col-lg-4">
                <fieldset class="form-group required">
                    <label>Categoria</label>
                    <select class="form-control" formControlName="categoriaId" required>
                        <option *ngFor="let categoria of categorias" [value]="categoria.id">{{categoria.nombre}}</option>
                    </select>
                    <p class="help-block">Elija una categoria del menú</p>
                </fieldset>
            </div>
            <div class="col-lg-8">
                <fieldset class="form-group required">
                    <label>Nombre</label>
                    <input class="form-control" type="text" formControlName="nombre" required>
                    <p class="help-block">Escoja un nombre para el formulario. Debe ser único.</p>
                </fieldset>
            </div>
        </div>
        <!-- formularios para los campos -->
        <div formArrayName="Campos" *ngFor="let campo of formatoForm.get('Campos').controls; let i = index;">
            <div [formGroupName]="i">
                <p>-----------------------------------separator---------------------------------</p>
                <div class="row">

                    <fieldset class="form-group required col-lg-6">
                        <!-- nombre -->
                        <label>Nombre</label>
                        <input class="form-control" type="text" formControlName="name" required>
                        <p class="help-block">Escoja un nombre para el formulario. Debe ser único.</p>
                    </fieldset>
                    <fieldset class="form-group required col-lg-6">
                        <!-- mensaje -->
                        <label>Mensaje</label>
                        <input class="form-control" type="text" formControlName="label" placeholder="Mensaje" required>
                        <!-- label -->
                        <p class="help-block">Este es el mensaje que identificará la casilla en el formulario.</p>
                    </fieldset>
                    <fieldset class="form-group required col-lg-4">
                        <!-- requerido -->
                        <label>
                            <input type="checkbox" formControlName="required" required> Requerido
                        </label>
                        <p class="help-block">Marque esta casilla si el campo es requerido.</p>
                    </fieldset>
                    <fieldset class="form-group required col-lg-2">
                        <!-- orden -->
                        <label>Orden</label>
                        <input class="form-control" type="number" formControlName="order" required>
                        <p class="help-block">Si lo desea, puede especificar un orden para los campos dentro del formulario.</p>
                    </fieldset>


                    <div [ngSwitch]="campo.value.controlType">

                        <div *ngSwitchCase="'checkbox'">
                            <fieldset class="form-group required col-lg-4">
                                <label>
                                    <input type="checkbox" formControlName="value"> Valor
                                </label>
                                <p class="help-block">El valor por defecto de la casilla (checkeado o no)</p>
                            </fieldset>



                        </div>
                        <div *ngSwitchCase="'dropdown'">
                            
                        </div>
                        <div *ngSwitchCase="'textbox'">
                            
                        </div>
                    </div>


                </div>
            </div>
        </div>
        <!-- Agregar campo -->
        <button class="btn btn-primary" (click)="crearFormulario()">Guardar Formulario</button>
    </form>
    <fieldset class="form-group required">
        <label>Tipo de campo</label>
        <select class="form-control" [(ngModel)]="tipoNuevoCampo" required>
            <option *ngFor="let tipo of tiposCampo" [value]="tipo.value">{{tipo.text}}</option>
        </select>
        <button type="button" (click)="agregarNuevoCampo(tipoNuevoCampo)" class="btn btn-default">
            <i class="fa fa-plus"></i> Agregar Campo
        </button>
        <p class="help-block">Escoja un nombre para el formulario. Debe ser único.</p>
    </fieldset>
</div>